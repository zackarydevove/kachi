generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum AssetType {
  crypto
  real_estate
  stock
  cash
  exotic
}

model User {
  id           Int      @id @default(autoincrement())
  email        String   @unique
  password     String
  refreshToken String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  deletedAt    DateTime

}

model Asset {
  id           Int      @id @default(autoincrement())
  // account_id         // later
  name        String
  type        AssetType // (crypto, real_estate, stock, cash, divers) (enum)
  unitPrice   Int       // cannot be <0
  quantity    Int       // cannot be < 0
  // currency    String // for now only USD
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  deletedAt    DateTime

  liabilities  AssetLiability[] // ðŸ‘ˆ back-reference
}

model Liability {
  id           Int      @id @default(autoincrement())
  // account_id         // later
  name        String
  amount      Int       // cannot be <0
  // currency    String // for now only USD
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  deletedAt    DateTime

  assets       AssetLiability[] // ðŸ‘ˆ back-reference
}

model AssetLiability {
  id          Int       @id @default(autoincrement())
  assetId     Int
  liabilityId Int

  asset       Asset     @relation(fields: [assetId], references: [id])
  liability   Liability @relation(fields: [liabilityId], references: [id])
}

// model NetWorthSnapshot {
//   id          Int       @id @default(autoincrement())
//   accountId   Int
//   value       Int
//   date        DateTime
// }